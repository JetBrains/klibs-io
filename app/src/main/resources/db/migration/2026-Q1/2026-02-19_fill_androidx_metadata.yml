databaseChangeLog:
  - changeSet:
      id: set minimized_readme for known androidx projects with readme
      author: nikita.vlaev@jetbrains.com
      comment: >
        KTL-4037: Set minimized_readme for known androidx sub-projects that have
        a pre-rendered README resource. The values are pre-computed by extracting
        plain text from each project's raw markdown README.
      changes:
        - sql:
            sql: |
              UPDATE project
              SET minimized_readme = vals.minimized
              FROM (VALUES
                ('annotation', 'Annotation Expose metadata that helps tools and other developers understand your app s code. API Reference Declaring dependencies To add a dependency on Annotation, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add build dependencies. Issue tracker Issue Tracker'),
                ('collection', 'Collection Reduce the memory impact of existing and new collections that are small. API Reference Declaring dependencies To add a dependency on Collection, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add Build Dependencies. Issue tracker Issue Tracker'),
                ('compose', 'Compose Define your UI programmatically with composable functions that describe its shape and data dependencies. User Guide Code Sample Structure Compose is combination of 7 Maven Group Ids within androidx . Each Group contains a targeted subset of functionality, each with its own set of release notes. This table explains the groups and links to each set of release notes. Group Description androidx.compose.animation Build animations in their Jetpack Compose applications to enrich the user experience. androidx.compose.compiler Transform @Composable functions and enable optimizations with a Kotlin compiler plugin. androidx.compose.foundation Write Jetpack Compose applications with ready to use building blocks and extend foundation to build your own design system pieces. androidx.compose.material Build Jetpack Compose UIs with ready to use Material Design Components. This is the higher level entry point of Compose, designed to provide components that match those described at . androidx.co'),
                ('datastore', 'DataStore Store data asynchronously, consistently, and transactionally, overcoming some of the drawbacks of SharedPreferences User Guide API Reference Declaring dependencies To add a dependency on DataStore, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. DataStore provides different options for serialization , choose one or the other. You can also add Android-free dependencies to either implementation. Add the dependencies for the implementation you need in the build.gradle file for your app or module Preferences DataStore Add the following lines to the dependencies part of your gradle file Kotlin To add optional RxJava support, add the following dependencies Kotlin DataStore Add the following lines to the dependencies part of your gradle file Kotlin Add the following optional dependencies for RxJava support Kotlin To serialize content, add dependencies for either Protocol Buffers or JSON serialization. JSON serialization '),
                ('lifecycle', 'Lifecycle Lifecycle-aware components perform actions in response to a change in the lifecycle status of another component, such as activities and fragments. These components help you produce better-organized, and often lighter-weight code, that is easier to maintain. User Guide Code Sample API Reference Declaring dependencies To add a dependency on Lifecycle, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin Kotlin Java Kotlin Issue tracker Issue Tracker'),
                ('navigation', 'Navigation Navigation is a framework for navigating between &#39;destinations&#39; within an Android application that provides a consistent API whether destinations are implemented as Fragments, Activities, or other components. User Guide Code Sample API Reference Declaring dependencies To add a dependency on Navigation, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin Safe Args To add Safe Args to your project, include the following classpath in your top level build.gradle file Kotlin You must also apply one of two available plugins. To generate Java language code suitable for Java or mixed Java and Kotlin modules, add this line to your app or module s build.gradle file Kotlin Alternatively, to generate Kotlin code suitable for Kotlin-only modules, add Kotlin You must have android.useAndroidX=true in your gradle.properties'),
                ('navigation3', 'navigation3 Navigation 3 is a new navigation library designed to work with Compose. API Reference Declaring dependencies To add a dependency on navigation3, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add build dependencies. Issue tracker Issue Tracker'),
                ('navigationevent', 'navigationevent The Navigation Event library provides a KMP-first API for handling system back as well as Predictive Back. API Reference Declaring dependencies To add a dependency on navigationevent, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add build dependencies. Issue tracker Issue Tracker'),
                ('paging', 'Paging The Paging Library makes it easier for you to load data gradually and gracefully within your app&#39;s RecyclerView. User Guide Code Sample API Reference Declaring dependencies To add a dependency on Paging, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin Issue tracker Issue Tracker'),
                ('room', 'Room The Room persistence library provides an abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite. User Guide API Reference Declaring dependencies To add a dependency on Room, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For information on using the KAPT plugin, see the KAPT documentation . For information on using the KSP plugin, see the KSP quick-start documentation . For information on using Kotlin extensions, see the ktx documentation . For more information about dependencies, see Add Build Dependencies . Optionally, for non-Android libraries i.e. Java or Kotlin only Gradle modules you can depend on androidx.room room-common to use Room annotations. Configuring Compiler Options Room has the following annotation processor options. Option Description room.sc'),
                ('savedstate', 'Savedstate Write pluggable components that save the UI state when a process dies, and restore it when the process restarts. User Guide API Reference Declaring dependencies To add a dependency on Savedstate, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add build dependencies. Issue tracker Issue Tracker'),
                ('sqlite', 'Sqlite The androidx.sqlite library contains abstract interfaces along with basic implementations which can be used to build your own libraries that access SQLite. You might want to consider using the Room library, which provides an abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite. User Guide API Reference Declaring dependencies To add a dependency on Sqlite, you must add the Google Maven repository to your project. Read Google s Maven repository for more information. Add the dependencies for the artifacts you need in the build.gradle file for your app or module Kotlin For more information about dependencies, see Add build dependencies. Issue tracker Issue Tracker')
              ) AS vals(name, minimized),
              scm_owner
              WHERE project.owner_id = scm_owner.id
                AND scm_owner.login = 'androidx'
                AND project.name = vals.name;

  - changeSet:
      id: set default description for known androidx projects without readme
      author: nikita.vlaev@jetbrains.com
      comment: >
        KTL-4037: For all known androidx sub-projects that do NOT have a
        pre-rendered README (i.e. still have minimized_readme IS NULL after
        the previous changeset), set a default description.
      changes:
        - sql:
            sql: |
              UPDATE project
              SET description = 'This is androidx library, that was not documented or supported well. It is probably just a KMP module, that could be used on your own responsibility.'
              FROM scm_owner
              WHERE project.owner_id = scm_owner.id
                AND scm_owner.login = 'androidx'
                AND project.minimized_readme IS NULL
                AND project.description IS NULL;
